import './polyfills.server.mjs';
import{a as A}from"./chunk-OIHKWZN3.mjs";import{$ as o,Aa as w,Ca as I,E as n,G as s,H as b,K as C,La as E,M as g,S as m,Sa as F,U as i,V as a,X as x,Y as d,Z as S,_ as r,ba as y,ca as _,p as v,q as f,za as h}from"./chunk-LVVL72GJ.mjs";import"./chunk-X2SEQXRR.mjs";var p=class l{transform(e){let t=typeof e=="string"?parseFloat(e):e;return isNaN(t)?"Invalid Price":t.toFixed(2)}static \u0275fac=function(t){return new(t||l)};static \u0275pipe=C({name:"price",type:l,pure:!0})};function N(l,e){if(l&1){let t=x();i(0,"div",5)(1,"div",6)(2,"div",7)(3,"h5",8),r(4),a(),i(5,"p",9),r(6),a(),i(7,"p",9),r(8),a(),i(9,"p",9),r(10),y(11,"price"),a(),i(12,"span",10),r(13),a(),i(14,"button",11),d("click",function(){let u=v(t).$implicit,P=S();return f(P.toggleAvailability(u))}),r(15),a()()()()}if(l&2){let t=e.$implicit;n(4),o("Breed: ",t.breed,""),n(2),o("ID: ",t.id,""),n(2),o("Weight: ",t.weight," kg"),n(2),o("Price: $",_(11,7,t.price),""),n(2),m("ngClass",t.available?"bg-success":"bg-secondary"),n(),o(" ",t.available?"Available":"Sold Out"," "),n(2),o(" Mark as ",t.available?"Sold":"Available"," ")}}var L=class l{constructor(e,t,c){this.http=e;this.cattleService=t;this.router=c;this.fetchCattle()}cattleList=[];CattleAdd(){this.router.navigate(["/add-cattle"])}fetchCattle(){this.cattleService.getCattle().subscribe({next:e=>this.cattleList=e,error:()=>alert("Failed to fetch cattle!")})}toggleAvailability(e){let t=!e.available;this.cattleService.updateCattleAvailability(e.id,t).subscribe({next:()=>{e.available=t},error:c=>{console.error("Failed to update cattle status",c),alert("Something went wrong. Try again.")}})}static \u0275fac=function(t){return new(t||l)(s(E),s(A),s(F))};static \u0275cmp=b({type:l,selectors:[["app-cattle-list"]],decls:7,vars:1,consts:[[1,"container","py-5"],[1,"text-center","mb-4"],["type","submit",1,"btn","btn-success","mb-3",3,"click"],[1,"row","g-4"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","h-100","shadow-sm"],[1,"card-body"],[1,"card-title"],[1,"card-text","mb-1"],[1,"badge","mb-2",3,"ngClass"],[1,"btn","btn-outline-primary","btn-sm","w-100",3,"click"]],template:function(t,c){t&1&&(i(0,"div",0)(1,"h2",1),r(2,"Available Cattle"),a(),i(3,"button",2),d("click",function(){return c.CattleAdd()}),r(4," + Add New Cattle "),a(),i(5,"div",3),g(6,N,16,9,"div",4),a()()),t&2&&(n(6),m("ngForOf",c.cattleList))},dependencies:[I,h,w,p],encapsulation:2})};export{L as CattleListComponent};
