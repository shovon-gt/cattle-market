import './polyfills.server.mjs';
import{b as S,c as f,d as _,e as L,f as x,h as N,i as F,j as $,k}from"./chunk-TZR3QIGW.mjs";import{Ba as v,Ca as b,E as a,G as p,H as g,La as w,M as u,Na as C,S as s,Sa as y,U as i,Ua as I,V as n,W as c,Y as h,_ as m}from"./chunk-LVVL72GJ.mjs";import"./chunk-X2SEQXRR.mjs";function G(l,o){l&1&&(i(0,"div",9),m(1," Username is required. "),n())}function M(l,o){l&1&&(i(0,"div",9),m(1," Password is required. "),n())}var E=class l{constructor(o,t,e){this.formBuilder=o;this.http=t;this.router=e}form;ngOnInit(){console.log("LoginComponent initialized2"),this.form=this.formBuilder.group({username:["",f.required],password:["",f.required]})}login(){if(this.form.invalid){this.form.markAllAsTouched();return}let{username:o,password:t}=this.form.value;this.http.get(`http://localhost:3000/users?username=${o}&password=${t}`).subscribe({next:e=>{if(e.length>0){let r=e[0];localStorage.setItem("token",r.token),this.router.navigate(["/cattle"])}else alert("Invalid username or password")},error:e=>{console.error("Login error",e),alert("Login failed")}})}login21(){let{username:o,password:t}=this.form.value;console.log(`http://localhost:3000/users?username=${o}&password=${t}`),this.http.get(`http://localhost:3000/users?username=${o}&password=${t}`).subscribe({next:e=>{e.length?(localStorage.setItem("token",e[0].token),this.router.navigate(["/cattle"])):alert("Invalid credentials")},error:()=>alert("Login failed!")})}login2(){console.log(this.form.value);let{username:o,password:t}=this.form.value;this.http.get(`http://localhost:3000/auth/login?username=${o}&password=${t}`).subscribe({next:e=>{e.length?(localStorage.setItem("token",e[0].token),this.router.navigate(["/cattle"])):alert("Invalid credentials")},error:()=>alert("Login failed!")})}static \u0275fac=function(t){return new(t||l)(p($),p(w),p(y))};static \u0275cmp=g({type:l,selectors:[["app-login"]],decls:13,vars:4,consts:[[1,"d-flex","justify-content-center","align-items-center","min-vh-100","bg-light"],[1,"card","shadow","p-4",2,"width","100%","max-width","400px"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["type","text","formControlName","username","placeholder","Username",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"text-danger","small","mt-1"]],template:function(t,e){if(t&1&&(i(0,"div",0)(1,"div",1)(2,"h4",2),m(3,"Login"),n(),i(4,"form",3),h("ngSubmit",function(){return e.login()}),i(5,"div",4),c(6,"input",5),u(7,G,2,0,"div",6),n(),i(8,"div",4),c(9,"input",7),u(10,M,2,0,"div",6),n(),i(11,"button",8),m(12,"Login"),n()()()()),t&2){let r,d;a(4),s("formGroup",e.form),a(3),s("ngIf",((r=e.form.get("username"))==null?null:r.invalid)&&((r=e.form.get("username"))==null?null:r.touched)),a(3),s("ngIf",((d=e.form.get("password"))==null?null:d.invalid)&&((d=e.form.get("password"))==null?null:d.touched)),a(),s("disabled",e.form.invalid)}},dependencies:[b,v,k,x,S,_,L,N,F,C,I],encapsulation:2})};export{E as LoginComponent};
